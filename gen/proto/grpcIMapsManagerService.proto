syntax = "proto3";

import "google/protobuf/empty.proto";

package grpcIMapsManager;

message createMapRequest
{
int32 grpcServerCompressionFormat  = 1;
string mapUUID = 2;
}

message createMapResponse
{
sint32 xpcfGrpcReturnValue = 1;
}

message deleteMapRequest
{
int32 grpcServerCompressionFormat  = 1;
string mapUUID = 2;
}

message deleteMapResponse
{
sint32 xpcfGrpcReturnValue = 1;
}

message getAllMapsRequest
{
int32 grpcServerCompressionFormat  = 1;
bytes mapUUIDList = 2;
}

message getAllMapsResponse
{
bytes mapUUIDList = 1;
sint32 xpcfGrpcReturnValue = 2;
}

message increaseMapClientsRequest
{
int32 grpcServerCompressionFormat  = 1;
string mapUUID = 2;
string serviceURL = 3;
}

message increaseMapClientsResponse
{
string serviceURL = 1;
sint32 xpcfGrpcReturnValue = 2;
}

message decreaseMapClientsRequest
{
int32 grpcServerCompressionFormat  = 1;
string mapUUID = 2;
}

message decreaseMapClientsResponse
{
sint32 xpcfGrpcReturnValue = 1;
}

message getMapRequestRequest
{
int32 grpcServerCompressionFormat  = 1;
string mapUUID = 2;
bytes map = 3;
}

message getMapRequestResponse
{
bytes map = 1;
sint32 xpcfGrpcReturnValue = 2;
}

message setMapRequestRequest
{
int32 grpcServerCompressionFormat  = 1;
string mapUUID = 2;
bytes mapDatastructure = 3;
}

message setMapRequestResponse
{
sint32 xpcfGrpcReturnValue = 1;
}

message getPointCloudRequestRequest
{
int32 grpcServerCompressionFormat  = 1;
string mapUUID = 2;
bytes pointCloud = 3;
}

message getPointCloudRequestResponse
{
bytes pointCloud = 1;
sint32 xpcfGrpcReturnValue = 2;
}

message getMapInfoRequest
{
int32 grpcServerCompressionFormat  = 1;
string mapUUID = 2;
sint32 descriptorType = 3;
uint32 mapSupportedTypes = 4;
uint32 dataSize = 5;
bool areImageSaved = 6;
}

message getMapInfoResponse
{
sint32 descriptorType = 1;
uint32 mapSupportedTypes = 2;
uint32 dataSize = 3;
bool areImageSaved = 4;
sint32 xpcfGrpcReturnValue = 5;
}

message requestMapProcessingRequest
{
int32 grpcServerCompressionFormat  = 1;
string mapUUID = 2;
string resultMapUUID = 3;
sint32 processingType = 4;
}

message requestMapProcessingResponse
{
sint32 xpcfGrpcReturnValue = 1;
}

message getMapProcessingStatusRequest
{
int32 grpcServerCompressionFormat  = 1;
string resultMapUUID = 2;
sint32 status = 3;
float progress = 4;
}

message getMapProcessingStatusResponse
{
sint32 status = 1;
float progress = 2;
sint32 xpcfGrpcReturnValue = 3;
}

message getMapProcessingDataRequest
{
int32 grpcServerCompressionFormat  = 1;
string resultMapUUID = 2;
bytes pointCloud = 3;
bytes keyframePoses = 4;
}

message getMapProcessingDataResponse
{
bytes pointCloud = 1;
bytes keyframePoses = 2;
sint32 xpcfGrpcReturnValue = 3;
}

service grpcIMapsManagerService {
rpc createMap(createMapRequest) returns(createMapResponse) {}
rpc deleteMap(deleteMapRequest) returns(deleteMapResponse) {}
rpc getAllMaps(getAllMapsRequest) returns(getAllMapsResponse) {}
rpc increaseMapClients(increaseMapClientsRequest) returns(increaseMapClientsResponse) {}
rpc decreaseMapClients(decreaseMapClientsRequest) returns(decreaseMapClientsResponse) {}
rpc getMapRequest(getMapRequestRequest) returns(getMapRequestResponse) {}
rpc setMapRequest(setMapRequestRequest) returns(setMapRequestResponse) {}
rpc getPointCloudRequest(getPointCloudRequestRequest) returns(getPointCloudRequestResponse) {}
rpc getMapInfo(getMapInfoRequest) returns(getMapInfoResponse) {}
rpc requestMapProcessing(requestMapProcessingRequest) returns(requestMapProcessingResponse) {}
rpc getMapProcessingStatus(getMapProcessingStatusRequest) returns(getMapProcessingStatusResponse) {}
rpc getMapProcessingData(getMapProcessingDataRequest) returns(getMapProcessingDataResponse) {}
}

